{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { useMemo } from 'react';\nimport { useCreatePath } from '../../routing';\nimport { useReference } from '../useReference';\nimport { useResourceDefinition } from '../../core';\nimport { useFieldValue } from '../../util';\nexport var useReferenceFieldController = function (options) {\n  var _a = options.link,\n    link = _a === void 0 ? 'edit' : _a,\n    reference = options.reference,\n    queryOptions = options.queryOptions;\n  if (!reference) {\n    throw new Error('useReferenceFieldController: missing reference prop. You must provide a reference, e.g. reference=\"posts\".');\n  }\n  var id = useFieldValue(options);\n  var referenceRecordQuery = useReference({\n    reference: reference,\n    id: id,\n    options: __assign(__assign({}, queryOptions), {\n      enabled: ((queryOptions === null || queryOptions === void 0 ? void 0 : queryOptions.enabled) == null || (queryOptions === null || queryOptions === void 0 ? void 0 : queryOptions.enabled) === true) && id != null\n    })\n  });\n  var createPath = useCreatePath();\n  var resourceDefinition = useResourceDefinition({\n    resource: reference\n  });\n  var result = useMemo(function () {\n    return __assign(__assign({}, referenceRecordQuery), {\n      link: referenceRecordQuery.referenceRecord != null ? link === false || link === 'edit' && !resourceDefinition.hasEdit || link === 'show' && !resourceDefinition.hasShow ? false : createPath({\n        resource: reference,\n        id: referenceRecordQuery.referenceRecord.id,\n        type: typeof link === 'function' ? link(referenceRecordQuery.referenceRecord, reference) : link\n      }) : undefined\n    });\n  }, [createPath, link, reference, referenceRecordQuery, resourceDefinition]);\n  return result;\n};","map":{"version":3,"names":["useMemo","useCreatePath","useReference","useResourceDefinition","useFieldValue","useReferenceFieldController","options","_a","link","reference","queryOptions","Error","id","referenceRecordQuery","__assign","enabled","createPath","resourceDefinition","resource","result","referenceRecord","hasEdit","hasShow","type","undefined"],"sources":["/Users/robertbinning/Documents/GitHub/robertbinning/passkey/node_modules/react-admin/node_modules/ra-core/src/controller/field/useReferenceFieldController.ts"],"sourcesContent":["import { useMemo } from 'react';\nimport { UseQueryOptions } from '@tanstack/react-query';\nimport { RaRecord } from '../../types';\nimport { LinkToType, useCreatePath } from '../../routing';\nimport { UseReferenceResult, useReference } from '../useReference';\nimport { useResourceDefinition } from '../../core';\nimport { useFieldValue } from '../../util';\n\nexport const useReferenceFieldController = <\n    ReferenceRecordType extends RaRecord = RaRecord,\n>(\n    options: UseReferenceFieldControllerOptions<ReferenceRecordType>\n): UseReferenceFieldControllerResult<ReferenceRecordType> => {\n    const { link = 'edit', reference, queryOptions } = options;\n    if (!reference) {\n        throw new Error(\n            'useReferenceFieldController: missing reference prop. You must provide a reference, e.g. reference=\"posts\".'\n        );\n    }\n    const id = useFieldValue(options);\n    const referenceRecordQuery = useReference<ReferenceRecordType>({\n        reference,\n        id,\n        options: {\n            ...queryOptions,\n            enabled:\n                (queryOptions?.enabled == null ||\n                    queryOptions?.enabled === true) &&\n                id != null,\n        },\n    });\n\n    const createPath = useCreatePath();\n    const resourceDefinition = useResourceDefinition({ resource: reference });\n\n    const result = useMemo(\n        () =>\n            ({\n                ...referenceRecordQuery,\n                link:\n                    referenceRecordQuery.referenceRecord != null\n                        ? link === false ||\n                          (link === 'edit' && !resourceDefinition.hasEdit) ||\n                          (link === 'show' && !resourceDefinition.hasShow)\n                            ? false\n                            : createPath({\n                                  resource: reference,\n                                  id: referenceRecordQuery.referenceRecord.id,\n                                  type:\n                                      typeof link === 'function'\n                                          ? link(\n                                                referenceRecordQuery.referenceRecord,\n                                                reference\n                                            )\n                                          : link,\n                              })\n                        : undefined,\n            }) as const,\n        [createPath, link, reference, referenceRecordQuery, resourceDefinition]\n    );\n    return result;\n};\n\nexport interface UseReferenceFieldControllerOptions<\n    ReferenceRecordType extends RaRecord = RaRecord,\n> {\n    source: string;\n    queryOptions?: Partial<\n        UseQueryOptions<ReferenceRecordType[], Error> & {\n            meta?: any;\n        }\n    >;\n    reference: string;\n    link?: LinkToType<ReferenceRecordType>;\n}\n\nexport interface UseReferenceFieldControllerResult<\n    ReferenceRecordType extends RaRecord = RaRecord,\n> extends UseReferenceResult<ReferenceRecordType> {\n    link?: string | false;\n}\n"],"mappings":";;;;;;;;;;AAAA,SAASA,OAAO,QAAQ,OAAO;AAG/B,SAAqBC,aAAa,QAAQ,eAAe;AACzD,SAA6BC,YAAY,QAAQ,iBAAiB;AAClE,SAASC,qBAAqB,QAAQ,YAAY;AAClD,SAASC,aAAa,QAAQ,YAAY;AAE1C,OAAO,IAAMC,2BAA2B,GAAG,SAAAA,CAGvCC,OAAgE;EAExD,IAAAC,EAAA,GAA2CD,OAAO,CAAAE,IAArC;IAAbA,IAAI,GAAAD,EAAA,cAAG,MAAM,GAAAA,EAAA;IAAEE,SAAS,GAAmBH,OAAO,CAAAG,SAA1B;IAAEC,YAAY,GAAKJ,OAAO,CAAAI,YAAZ;EAC9C,IAAI,CAACD,SAAS,EAAE;IACZ,MAAM,IAAIE,KAAK,CACX,4GAA4G,CAC/G;;EAEL,IAAMC,EAAE,GAAGR,aAAa,CAACE,OAAO,CAAC;EACjC,IAAMO,oBAAoB,GAAGX,YAAY,CAAsB;IAC3DO,SAAS,EAAAA,SAAA;IACTG,EAAE,EAAAA,EAAA;IACFN,OAAO,EAAAQ,QAAA,CAAAA,QAAA,KACAJ,YAAY;MACfK,OAAO,EACH,CAAC,CAAAL,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEK,OAAO,KAAI,IAAI,IAC1B,CAAAL,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEK,OAAO,MAAK,IAAI,KAClCH,EAAE,IAAI;IAAI;GAErB,CAAC;EAEF,IAAMI,UAAU,GAAGf,aAAa,EAAE;EAClC,IAAMgB,kBAAkB,GAAGd,qBAAqB,CAAC;IAAEe,QAAQ,EAAET;EAAS,CAAE,CAAC;EAEzE,IAAMU,MAAM,GAAGnB,OAAO,CAClB;IACI,OAAAc,QAAA,CAAAA,QAAA,KACOD,oBAAoB;MACvBL,IAAI,EACAK,oBAAoB,CAACO,eAAe,IAAI,IAAI,GACtCZ,IAAI,KAAK,KAAK,IACbA,IAAI,KAAK,MAAM,IAAI,CAACS,kBAAkB,CAACI,OAAQ,IAC/Cb,IAAI,KAAK,MAAM,IAAI,CAACS,kBAAkB,CAACK,OAAQ,GAC5C,KAAK,GACLN,UAAU,CAAC;QACPE,QAAQ,EAAET,SAAS;QACnBG,EAAE,EAAEC,oBAAoB,CAACO,eAAe,CAACR,EAAE;QAC3CW,IAAI,EACA,OAAOf,IAAI,KAAK,UAAU,GACpBA,IAAI,CACAK,oBAAoB,CAACO,eAAe,EACpCX,SAAS,CACZ,GACDD;OACb,CAAC,GACNgB;IAAS;EAnBvB,CAoBW,EACf,CAACR,UAAU,EAAER,IAAI,EAAEC,SAAS,EAAEI,oBAAoB,EAAEI,kBAAkB,CAAC,CAC1E;EACD,OAAOE,MAAM;AACjB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
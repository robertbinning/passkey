{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport get from 'lodash/get';\nimport { useGetManyAggregate } from '../../dataProvider';\nimport { useList } from '../list';\nimport { useNotify } from '../../notification';\nvar emptyArray = [];\nvar defaultFilter = {};\n/**\n * Hook that fetches records from another resource specified\n * by an array of *ids* in current record.\n *\n * @example\n *\n * const { data, error, isFetching, isPending } = useReferenceArrayFieldController({\n *      record: { referenceIds: ['id1', 'id2']};\n *      reference: 'reference';\n *      resource: 'resource';\n *      source: 'referenceIds';\n * });\n *\n * @param {Object} props\n * @param {Object} props.record The current resource record\n * @param {string} props.reference The linked resource name\n * @param {string} props.resource The current resource name\n * @param {string} props.source The key of the linked resource identifier\n *\n * @param {Props} props\n *\n * @returns {ListControllerResult} The reference props\n */\nexport var useReferenceArrayFieldController = function (props) {\n  var _a = props.filter,\n    filter = _a === void 0 ? defaultFilter : _a,\n    _b = props.page,\n    page = _b === void 0 ? 1 : _b,\n    _c = props.perPage,\n    perPage = _c === void 0 ? 1000 : _c,\n    record = props.record,\n    reference = props.reference,\n    sort = props.sort,\n    source = props.source,\n    _d = props.queryOptions,\n    queryOptions = _d === void 0 ? {} : _d;\n  var notify = useNotify();\n  var value = get(record, source);\n  var meta = queryOptions.meta,\n    otherQueryOptions = __rest(queryOptions, [\"meta\"]);\n  var ids = Array.isArray(value) ? value : emptyArray;\n  var _e = useGetManyAggregate(reference, {\n      ids: ids,\n      meta: meta\n    }, __assign({\n      onError: function (error) {\n        return notify(typeof error === 'string' ? error : error.message || 'ra.notification.http_error', {\n          type: 'error',\n          messageArgs: {\n            _: typeof error === 'string' ? error : error && error.message ? error.message : undefined\n          }\n        });\n      }\n    }, otherQueryOptions)),\n    data = _e.data,\n    error = _e.error,\n    isLoading = _e.isLoading,\n    isFetching = _e.isFetching,\n    isPending = _e.isPending,\n    refetch = _e.refetch;\n  var listProps = useList({\n    data: data,\n    error: error,\n    filter: filter,\n    isFetching: isFetching,\n    isLoading: isLoading,\n    isPending: isPending,\n    page: page,\n    perPage: perPage,\n    sort: sort\n  });\n  return __assign(__assign({}, listProps), {\n    defaultTitle: undefined,\n    refetch: refetch,\n    resource: reference\n  });\n};","map":{"version":3,"names":["get","useGetManyAggregate","useList","useNotify","emptyArray","defaultFilter","useReferenceArrayFieldController","props","_a","filter","_b","page","_c","perPage","record","reference","sort","source","_d","queryOptions","notify","value","meta","otherQueryOptions","__rest","ids","Array","isArray","_e","__assign","onError","error","message","type","messageArgs","_","undefined","data","isLoading","isFetching","isPending","refetch","listProps","defaultTitle","resource"],"sources":["/Users/robertbinning/Documents/GitHub/robertbinning/passkey/node_modules/react-admin/node_modules/ra-core/src/controller/field/useReferenceArrayFieldController.ts"],"sourcesContent":["import get from 'lodash/get';\nimport { RaRecord, SortPayload } from '../../types';\nimport { useGetManyAggregate } from '../../dataProvider';\nimport { ListControllerResult, useList } from '../list';\nimport { useNotify } from '../../notification';\nimport { UseQueryOptions } from '@tanstack/react-query';\n\nexport interface UseReferenceArrayFieldControllerParams<\n    RecordType extends RaRecord = RaRecord,\n    ReferenceRecordType extends RaRecord = RaRecord,\n> {\n    filter?: any;\n    page?: number;\n    perPage?: number;\n    record?: RecordType;\n    reference: string;\n    resource?: string;\n    sort?: SortPayload;\n    source: string;\n    queryOptions?: Omit<\n        UseQueryOptions<ReferenceRecordType[]>,\n        'queryFn' | 'queryKey'\n    >;\n}\n\nconst emptyArray = [];\nconst defaultFilter = {};\n\n/**\n * Hook that fetches records from another resource specified\n * by an array of *ids* in current record.\n *\n * @example\n *\n * const { data, error, isFetching, isPending } = useReferenceArrayFieldController({\n *      record: { referenceIds: ['id1', 'id2']};\n *      reference: 'reference';\n *      resource: 'resource';\n *      source: 'referenceIds';\n * });\n *\n * @param {Object} props\n * @param {Object} props.record The current resource record\n * @param {string} props.reference The linked resource name\n * @param {string} props.resource The current resource name\n * @param {string} props.source The key of the linked resource identifier\n *\n * @param {Props} props\n *\n * @returns {ListControllerResult} The reference props\n */\nexport const useReferenceArrayFieldController = <\n    RecordType extends RaRecord = RaRecord,\n    ReferenceRecordType extends RaRecord = RaRecord,\n>(\n    props: UseReferenceArrayFieldControllerParams<\n        RecordType,\n        ReferenceRecordType\n    >\n): ListControllerResult => {\n    const {\n        filter = defaultFilter,\n        page = 1,\n        perPage = 1000,\n        record,\n        reference,\n        sort,\n        source,\n        queryOptions = {},\n    } = props;\n    const notify = useNotify();\n    const value = get(record, source);\n    const { meta, ...otherQueryOptions } = queryOptions;\n    const ids = Array.isArray(value) ? value : emptyArray;\n\n    const { data, error, isLoading, isFetching, isPending, refetch } =\n        useGetManyAggregate<ReferenceRecordType>(\n            reference,\n            { ids, meta },\n            {\n                onError: error =>\n                    notify(\n                        typeof error === 'string'\n                            ? error\n                            : error.message || 'ra.notification.http_error',\n                        {\n                            type: 'error',\n                            messageArgs: {\n                                _:\n                                    typeof error === 'string'\n                                        ? error\n                                        : error && error.message\n                                          ? error.message\n                                          : undefined,\n                            },\n                        }\n                    ),\n                ...otherQueryOptions,\n            }\n        );\n\n    const listProps = useList<ReferenceRecordType>({\n        data,\n        error,\n        filter,\n        isFetching,\n        isLoading,\n        isPending,\n        page,\n        perPage,\n        sort,\n    });\n\n    return {\n        ...listProps,\n        defaultTitle: undefined,\n        refetch,\n        resource: reference,\n    };\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,OAAOA,GAAG,MAAM,YAAY;AAE5B,SAASC,mBAAmB,QAAQ,oBAAoB;AACxD,SAA+BC,OAAO,QAAQ,SAAS;AACvD,SAASC,SAAS,QAAQ,oBAAoB;AAqB9C,IAAMC,UAAU,GAAG,EAAE;AACrB,IAAMC,aAAa,GAAG,EAAE;AAExB;;;;;;;;;;;;;;;;;;;;;;;AAuBA,OAAO,IAAMC,gCAAgC,GAAG,SAAAA,CAI5CC,KAGC;EAGG,IAAAC,EAAA,GAQAD,KAAK,CAAAE,MARiB;IAAtBA,MAAM,GAAAD,EAAA,cAAGH,aAAa,GAAAG,EAAA;IACtBE,EAAA,GAOAH,KAAK,CAAAI,IAPG;IAARA,IAAI,GAAAD,EAAA,cAAG,CAAC,GAAAA,EAAA;IACRE,EAAA,GAMAL,KAAK,CAAAM,OANS;IAAdA,OAAO,GAAAD,EAAA,cAAG,IAAI,GAAAA,EAAA;IACdE,MAAM,GAKNP,KAAK,CAAAO,MALC;IACNC,SAAS,GAITR,KAAK,CAAAQ,SAJI;IACTC,IAAI,GAGJT,KAAK,CAAAS,IAHD;IACJC,MAAM,GAENV,KAAK,CAAAU,MAFC;IACNC,EAAA,GACAX,KAAK,CAAAY,YADY;IAAjBA,YAAY,GAAAD,EAAA,cAAG,EAAE,GAAAA,EAAA;EAErB,IAAME,MAAM,GAAGjB,SAAS,EAAE;EAC1B,IAAMkB,KAAK,GAAGrB,GAAG,CAACc,MAAM,EAAEG,MAAM,CAAC;EACzB,IAAAK,IAAI,GAA2BH,YAAY,CAAAG,IAAvC;IAAKC,iBAAiB,GAAAC,MAAA,CAAKL,YAAY,EAA7C,QAA8B,CAAF;EAClC,IAAMM,GAAG,GAAGC,KAAK,CAACC,OAAO,CAACN,KAAK,CAAC,GAAGA,KAAK,GAAGjB,UAAU;EAE/C,IAAAwB,EAAA,GACF3B,mBAAmB,CACfc,SAAS,EACT;MAAEU,GAAG,EAAAA,GAAA;MAAEH,IAAI,EAAAA;IAAA,CAAE,EAAAO,QAAA;MAETC,OAAO,EAAE,SAAAA,CAAAC,KAAK;QACV,OAAAX,MAAM,CACF,OAAOW,KAAK,KAAK,QAAQ,GACnBA,KAAK,GACLA,KAAK,CAACC,OAAO,IAAI,4BAA4B,EACnD;UACIC,IAAI,EAAE,OAAO;UACbC,WAAW,EAAE;YACTC,CAAC,EACG,OAAOJ,KAAK,KAAK,QAAQ,GACnBA,KAAK,GACLA,KAAK,IAAIA,KAAK,CAACC,OAAO,GACpBD,KAAK,CAACC,OAAO,GACbI;;SAEnB,CACJ;MAfD;IAeC,GACFb,iBAAiB,EAE3B;IAxBGc,IAAI,GAAAT,EAAA,CAAAS,IAAA;IAAEN,KAAK,GAAAH,EAAA,CAAAG,KAAA;IAAEO,SAAS,GAAAV,EAAA,CAAAU,SAAA;IAAEC,UAAU,GAAAX,EAAA,CAAAW,UAAA;IAAEC,SAAS,GAAAZ,EAAA,CAAAY,SAAA;IAAEC,OAAO,GAAAb,EAAA,CAAAa,OAwBzD;EAEL,IAAMC,SAAS,GAAGxC,OAAO,CAAsB;IAC3CmC,IAAI,EAAAA,IAAA;IACJN,KAAK,EAAAA,KAAA;IACLtB,MAAM,EAAAA,MAAA;IACN8B,UAAU,EAAAA,UAAA;IACVD,SAAS,EAAAA,SAAA;IACTE,SAAS,EAAAA,SAAA;IACT7B,IAAI,EAAAA,IAAA;IACJE,OAAO,EAAAA,OAAA;IACPG,IAAI,EAAAA;GACP,CAAC;EAEF,OAAAa,QAAA,CAAAA,QAAA,KACOa,SAAS;IACZC,YAAY,EAAEP,SAAS;IACvBK,OAAO,EAAAA,OAAA;IACPG,QAAQ,EAAE7B;EAAS;AAE3B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { useEffect } from 'react';\nimport { useLocation } from 'react-router';\nimport debounce from 'lodash/debounce';\nimport { useStore } from '../store';\n/**\n * A hook that tracks the scroll position and restores it when the component mounts.\n * @param storeKey The key under which to store the scroll position in the store\n * @param debounceMs The debounce time in milliseconds\n *\n * @example\n * import { useRestoreScrollPosition } from 'ra-core';\n *\n * const MyCustomPage = () => {\n *   useRestoreScrollPosition('my-list');\n *\n *   return (\n *     <div>\n *       <h1>My Custom Page</h1>\n *       <VeryLongContent />\n *     </div>\n *   );\n * };\n */\nexport var useRestoreScrollPosition = function (storeKey, debounceMs) {\n  if (debounceMs === void 0) {\n    debounceMs = 250;\n  }\n  var _a = useTrackScrollPosition(storeKey, debounceMs),\n    position = _a[0],\n    setPosition = _a[1];\n  var location = useLocation();\n  useEffect(function () {\n    var _a;\n    if (position != null && ((_a = location.state) === null || _a === void 0 ? void 0 : _a._scrollToTop) !== true) {\n      setPosition(undefined);\n      window.scrollTo(0, position);\n    }\n    // We only want to run this effect on mount\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n};\n/**\n * A hook that tracks the scroll position and stores it.\n * @param storeKey The key under which to store the scroll position in the store\n * @param debounceMs The debounce time in milliseconds\n *\n * @example\n * import { useTrackScrollPosition } from 'ra-core';\n *\n * const MyCustomPage = () => {\n *   useTrackScrollPosition('my-list');\n *\n *   return (\n *     <div>\n *       <h1>My Custom Page</h1>\n *       <VeryLongContent />\n *     </div>\n *   );\n * };\n */\nexport var useTrackScrollPosition = function (storeKey, debounceMs) {\n  if (debounceMs === void 0) {\n    debounceMs = 250;\n  }\n  var _a = useStore(storeKey),\n    position = _a[0],\n    setPosition = _a[1];\n  useEffect(function () {\n    if (typeof window === 'undefined') {\n      return;\n    }\n    var handleScroll = debounce(function () {\n      setPosition(window.scrollY);\n    }, debounceMs);\n    window.addEventListener('scroll', handleScroll);\n    return function () {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [debounceMs, setPosition]);\n  return [position, setPosition];\n};","map":{"version":3,"names":["useEffect","useLocation","debounce","useStore","useRestoreScrollPosition","storeKey","debounceMs","_a","useTrackScrollPosition","position","setPosition","location","state","_scrollToTop","undefined","window","scrollTo","handleScroll","scrollY","addEventListener","removeEventListener"],"sources":["/Users/robertbinning/Documents/GitHub/robertbinning/passkey/node_modules/react-admin/node_modules/ra-core/src/routing/useRestoreScrollPosition.ts"],"sourcesContent":["import { useEffect } from 'react';\nimport { useLocation } from 'react-router';\nimport debounce from 'lodash/debounce';\n\nimport { useStore } from '../store';\n\n/**\n * A hook that tracks the scroll position and restores it when the component mounts.\n * @param storeKey The key under which to store the scroll position in the store\n * @param debounceMs The debounce time in milliseconds\n *\n * @example\n * import { useRestoreScrollPosition } from 'ra-core';\n *\n * const MyCustomPage = () => {\n *   useRestoreScrollPosition('my-list');\n *\n *   return (\n *     <div>\n *       <h1>My Custom Page</h1>\n *       <VeryLongContent />\n *     </div>\n *   );\n * };\n */\nexport const useRestoreScrollPosition = (\n    storeKey: string,\n    debounceMs = 250\n) => {\n    const [position, setPosition] = useTrackScrollPosition(\n        storeKey,\n        debounceMs\n    );\n    const location = useLocation();\n\n    useEffect(() => {\n        if (position != null && location.state?._scrollToTop !== true) {\n            setPosition(undefined);\n            window.scrollTo(0, position);\n        }\n        // We only want to run this effect on mount\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n};\n\n/**\n * A hook that tracks the scroll position and stores it.\n * @param storeKey The key under which to store the scroll position in the store\n * @param debounceMs The debounce time in milliseconds\n *\n * @example\n * import { useTrackScrollPosition } from 'ra-core';\n *\n * const MyCustomPage = () => {\n *   useTrackScrollPosition('my-list');\n *\n *   return (\n *     <div>\n *       <h1>My Custom Page</h1>\n *       <VeryLongContent />\n *     </div>\n *   );\n * };\n */\nexport const useTrackScrollPosition = (storeKey: string, debounceMs = 250) => {\n    const [position, setPosition] = useStore(storeKey);\n\n    useEffect(() => {\n        if (typeof window === 'undefined') {\n            return;\n        }\n        const handleScroll = debounce(() => {\n            setPosition(window.scrollY);\n        }, debounceMs);\n\n        window.addEventListener('scroll', handleScroll);\n\n        return () => {\n            window.removeEventListener('scroll', handleScroll);\n        };\n    }, [debounceMs, setPosition]);\n\n    return [position, setPosition];\n};\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,QAAQ,cAAc;AAC1C,OAAOC,QAAQ,MAAM,iBAAiB;AAEtC,SAASC,QAAQ,QAAQ,UAAU;AAEnC;;;;;;;;;;;;;;;;;;;AAmBA,OAAO,IAAMC,wBAAwB,GAAG,SAAAA,CACpCC,QAAgB,EAChBC,UAAgB;EAAhB,IAAAA,UAAA;IAAAA,UAAA,MAAgB;EAAA;EAEV,IAAAC,EAAA,GAA0BC,sBAAsB,CAClDH,QAAQ,EACRC,UAAU,CACb;IAHMG,QAAQ,GAAAF,EAAA;IAAEG,WAAW,GAAAH,EAAA,GAG3B;EACD,IAAMI,QAAQ,GAAGV,WAAW,EAAE;EAE9BD,SAAS,CAAC;;IACN,IAAIS,QAAQ,IAAI,IAAI,IAAI,EAAAF,EAAA,GAAAI,QAAQ,CAACC,KAAK,cAAAL,EAAA,uBAAAA,EAAA,CAAEM,YAAY,MAAK,IAAI,EAAE;MAC3DH,WAAW,CAACI,SAAS,CAAC;MACtBC,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAEP,QAAQ,CAAC;;IAEhC;IACA;EACJ,CAAC,EAAE,EAAE,CAAC;AACV,CAAC;AAED;;;;;;;;;;;;;;;;;;;AAmBA,OAAO,IAAMD,sBAAsB,GAAG,SAAAA,CAACH,QAAgB,EAAEC,UAAgB;EAAhB,IAAAA,UAAA;IAAAA,UAAA,MAAgB;EAAA;EAC/D,IAAAC,EAAA,GAA0BJ,QAAQ,CAACE,QAAQ,CAAC;IAA3CI,QAAQ,GAAAF,EAAA;IAAEG,WAAW,GAAAH,EAAA,GAAsB;EAElDP,SAAS,CAAC;IACN,IAAI,OAAOe,MAAM,KAAK,WAAW,EAAE;MAC/B;;IAEJ,IAAME,YAAY,GAAGf,QAAQ,CAAC;MAC1BQ,WAAW,CAACK,MAAM,CAACG,OAAO,CAAC;IAC/B,CAAC,EAAEZ,UAAU,CAAC;IAEdS,MAAM,CAACI,gBAAgB,CAAC,QAAQ,EAAEF,YAAY,CAAC;IAE/C,OAAO;MACHF,MAAM,CAACK,mBAAmB,CAAC,QAAQ,EAAEH,YAAY,CAAC;IACtD,CAAC;EACL,CAAC,EAAE,CAACX,UAAU,EAAEI,WAAW,CAAC,CAAC;EAE7B,OAAO,CAACD,QAAQ,EAAEC,WAAW,CAAC;AAClC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}